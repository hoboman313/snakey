define("snakey/app",["exports","ember","ember/resolver","ember/load-initializers","snakey/config/environment"],function(e,t,n,a,r){"use strict";var i;t["default"].MODEL_FACTORY_INJECTIONS=!0,i=t["default"].Application.extend({modulePrefix:r["default"].modulePrefix,podModulePrefix:r["default"].podModulePrefix,Resolver:n["default"]}),a["default"](i,r["default"].modulePrefix),e["default"]=i}),define("snakey/components/game-control",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Component.extend({actions:{newGame:function(){this.sendAction("newGameClick")},toggleSound:function(){var e=!this.get("soundOff");this.set("soundOff",e),t["default"].$("#game-song").trigger(e?"pause":"play"),"undefined"!=typeof Storage&&localStorage.setItem("snakey.soundOff",e)}},didInsertElement:function(){if("undefined"!=typeof Storage){var e=JSON.parse(localStorage.getItem("snakey.soundOff"));e||(this.set("soundOff",e),t["default"].$("#game-song").trigger("play"))}},score:null,highScore:null,soundOff:!0,soundClass:function(){return this.get("soundOff")?"sound-off":"sound-on"}.property("soundOff")})}),define("snakey/components/game-grid",["exports","ember","snakey/components/game-grid/cell","snakey/components/game-grid/snake"],function(e,t,n,a){"use strict";e["default"]=t["default"].Component.extend({actions:{eatFrog:function(){this.sendAction("eatFrog"),this.decrementProperty("currentFrogs",1),this.get("putFrogsInGrid").bind(this)()}},gameState:null,onGameStateChange:function(){if("newGame"===this.get("gameState")){var e=0,t=0;this.resetBoard(),this.putFrogsInGrid(),this.get("snake").start(e,t),this.set("gameState","gameOn")}}.observes("gameState"),dimensions:[20,20],snake:null,maxFrogs:3,currentFrogs:0,putFrogsInGrid:function(){var e,t=this.get("freeCells"),n=Object.keys(t),a=[],r=this.get("grid"),i=this.get("currentFrogs"),d=this.get("maxFrogs")-i,o=this;0===t.length&&this.set("gameState","gameFinished");for(var s=0;d>s;s++){do e=Math.floor(Math.random()*n.length);while(a.contains(e));a.push(e)}a.forEach(function(e){var a=n[e];r[t[a][0]][t[a][1]].set("entity","frog"),o.incrementProperty("currentFrogs",1)})},grid:null,freeCells:null,resetBoard:function(){var e=t["default"].A(),a=this.get("dimensions");this.set("freeCells",t["default"].Object.create());for(var r=0;r<a[0];r++){for(var i=[],d=0;d<a[1];d++)i.push(n["default"].create({location:[r,d],parentController:this,entity:"empty"}));e.push(i)}this.setProperties({grid:e,currentFrogs:0})},didInsertElement:function(){this.resetBoard(),this.set("snake",a["default"].create({parentController:this}))}})}),define("snakey/components/game-grid/cell",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Object.extend({parentController:null,location:null,entity:null,onEntityChange:function(){var e=this.get("entity"),t=this.get("parentController.freeCells"),n=this.get("location"),a=n[0]+","+n[1];"empty"===e?t[a]=[n[0],n[1]]:delete t[a]}.observes("entity"),init:function(){this.onEntityChange()},cellClass:function(){return this.get("entity")+"-cell"}.property("entity")})}),define("snakey/components/game-grid/snake",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Object.extend({parentController:null,direction:null,headPosition:null,body:null,baseHeartBeat:4e4,timer:null,start:function(e,t){var n=this.get("doMove"),a=this.get("baseHeartBeat"),r=this.get("timer"),i=this,d=this.get("parentController.dimensions"),o=a/(d[0]*d[1]);this.setProperties({headPosition:[e,t],body:[],direction:[0,1,"-right"]}),this.get("parentController.grid")[e][t].set("entity","snake-head"+this.get("direction")[2]),null!==r&&clearInterval(r),this.set("timer",setInterval(function(){n.bind(i)()},o))},doMove:function(){var e=this.get("parentController");if("gameOn"===e.get("gameState")){var t=this.get("direction"),n=this.get("headPosition"),a=this.get("body"),r=n[0]+t[0],i=n[1]+t[1],d=r>=0&&i>=0&&r<e.get("dimensions")[0]&&i<e.get("dimensions")[1],o=a.every(function(e){return!(e[0]===r&&e[1]===i)});if(d&&o){var s=e.get("grid"),c=s[n[0]][n[1]],l=s[r][i];if("frog"===l.get("entity"))e.send("eatFrog"),a.push([n[0],n[1]]),s[n[0]][n[1]].set("entity","snake-body"+t[2]);else{var h=a.shift();void 0!==h?(s[h[0]][h[1]].set("entity","empty"),s[n[0]][n[1]].set("entity","snake-body"+t[2]),a.push([n[0],n[1]])):c.set("entity","empty")}if(a.length>0){var u=s[a[0][0]][a[0][1]].entity.replace("snake-body","snake-tail");s[a[0][0]][a[0][1]].set("entity",u)}l.set("entity","snake-head"+t[2]),this.set("headPosition",[r,i])}else e.set("gameState","gameFinished")}else clearInterval(this.get("timer"))},init:function(){var e=this,n=this.get("isSafeNewDirection").bind(this);t["default"].$(document).keydown(function(t){var a=t.which;38!==a&&87!==a||!n([-1,0])?40!==a&&83!==a||!n([1,0])?37!==a&&65!==a||!n([0,-1])?39!==a&&68!==a||!n([0,1])||e.set("direction",[0,1,"-right"]):e.set("direction",[0,-1,"-left"]):e.set("direction",[1,0,"-down"]):e.set("direction",[-1,0,"-up"])})},isSafeNewDirection:function(e){if(this.get("body").length>0){var t=this.get("direction");if(t[0]+e[0]===0&&t[1]+e[1]===0)return!1}return!0}})}),define("snakey/components/snakey-app",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Component.extend({actions:{newGame:function(){this.set("score",0),this.set("gameState","newGame")},score:function(){this.incrementProperty("score",this.get("incrementScoreBy"))}},onScoreChange:function(){"undefined"!=typeof Storage&&this.get("score")>this.get("highScore")&&(localStorage.setItem("snakey.highScore",this.get("score")),this.set("highScore",this.get("score")))}.observes("score"),didInsertElement:function(){if("undefined"!=typeof Storage){var e=localStorage.getItem("snakey.highScore");e&&this.set("highScore",e)}},incrementScoreBy:100,highScore:0,score:0,scored:!1,gameState:"noGame"})}),define("snakey/initializers/app-version",["exports","snakey/config/environment","ember"],function(e,t,n){"use strict";var a=n["default"].String.classify,r=!1;e["default"]={name:"App Version",initialize:function(e,i){if(!r){var d=a(i.toString());n["default"].libraries.register(d,t["default"].APP.version),r=!0}}}}),define("snakey/initializers/export-application-global",["exports","ember","snakey/config/environment"],function(e,t,n){"use strict";function a(e,a){var r=t["default"].String.classify(n["default"].modulePrefix);n["default"].exportApplicationGlobal&&!window[r]&&(window[r]=a)}e.initialize=a,e["default"]={name:"export-application-global",initialize:a}}),define("snakey/router",["exports","ember","snakey/config/environment"],function(e,t,n){"use strict";var a=t["default"].Router.extend({location:n["default"].locationType});e["default"]=a.map(function(){})}),define("snakey/templates/application",["exports"],function(e){"use strict";e["default"]=Ember.HTMLBars.template(function(){return{isHTMLBars:!0,revision:"Ember@1.11.1",blockParams:0,cachedFragment:null,hasRendered:!1,build:function(e){var t=e.createDocumentFragment(),n=e.createElement("div");e.setAttribute(n,"id","centered-form");var a=e.createTextNode("\n");e.appendChild(n,a);var a=e.createComment("");e.appendChild(n,a);var a=e.createTextNode("\n");return e.appendChild(n,a),e.appendChild(t,n),t},render:function(e,t,n){var a=t.dom,r=t.hooks,i=r.content;a.detectNamespace(n);var d;t.useFragmentCache&&a.canClone?(null===this.cachedFragment&&(d=this.build(a),this.hasRendered?this.cachedFragment=d:this.hasRendered=!0),this.cachedFragment&&(d=a.cloneNode(this.cachedFragment,!0))):d=this.build(a);var o=a.createMorphAt(a.childAt(d,[0]),1,1);return i(t,o,e,"outlet"),d}}}())}),define("snakey/templates/components/game-control",["exports"],function(e){"use strict";e["default"]=Ember.HTMLBars.template(function(){return{isHTMLBars:!0,revision:"Ember@1.11.1",blockParams:0,cachedFragment:null,hasRendered:!1,build:function(e){var t=e.createDocumentFragment(),n=e.createElement("div");e.setAttribute(n,"id","game-control");var a=e.createTextNode("\n    ");e.appendChild(n,a);var a=e.createElement("div");e.setAttribute(a,"id","sound-control"),e.appendChild(n,a);var a=e.createTextNode("\n    ");e.appendChild(n,a);var a=e.createElement("div");e.setAttribute(a,"id","game-options");var r=e.createTextNode("\n      ");e.appendChild(a,r);var r=e.createComment("");e.appendChild(a,r);var r=e.createTextNode(" âˆž scrolling\n        ");e.appendChild(a,r);var r=e.createElement("br");e.appendChild(a,r);var r=e.createTextNode("\n      ");e.appendChild(a,r);var r=e.createComment("");e.appendChild(a,r);var r=e.createTextNode(" speed up\n    ");e.appendChild(a,r),e.appendChild(n,a);var a=e.createTextNode("\n\n    ");e.appendChild(n,a);var a=e.createElement("p");e.setAttribute(a,"id","game-title");var r=e.createTextNode("Snakey");e.appendChild(a,r),e.appendChild(n,a);var a=e.createTextNode("\n    ");e.appendChild(n,a);var a=e.createElement("p");e.setAttribute(a,"id","game-description");var r=e.createTextNode("Eat the frogs. Save the world.");e.appendChild(a,r),e.appendChild(n,a);var a=e.createTextNode("\n\n    ");e.appendChild(n,a);var a=e.createElement("div");e.setAttribute(a,"id","new-game-btn");var r=e.createTextNode("New Game");e.appendChild(a,r),e.appendChild(n,a);var a=e.createTextNode("\n\n    ");e.appendChild(n,a);var a=e.createElement("audio");e.setAttribute(a,"id","game-song"),e.setAttribute(a,"loop","");var r=e.createTextNode("\n        ");e.appendChild(a,r);var r=e.createElement("source");e.setAttribute(r,"src","game-song.mp3"),e.setAttribute(r,"type","audio/mpeg"),e.appendChild(a,r);var r=e.createTextNode("\n    ");e.appendChild(a,r),e.appendChild(n,a);var a=e.createTextNode("\n\n    ");e.appendChild(n,a);var a=e.createElement("div");e.setAttribute(a,"id","game-score");var r=e.createElement("span");e.setAttribute(r,"class","bold-text");var i=e.createTextNode("Score:");e.appendChild(r,i),e.appendChild(a,r);var r=e.createTextNode(" ");e.appendChild(a,r);var r=e.createComment("");e.appendChild(a,r),e.appendChild(n,a);var a=e.createTextNode("\n    ");e.appendChild(n,a);var a=e.createElement("div");e.setAttribute(a,"id","game-highscore");var r=e.createElement("span");e.setAttribute(r,"class","bold-text");var i=e.createTextNode("Highscore:");e.appendChild(r,i),e.appendChild(a,r);var r=e.createTextNode(" ");e.appendChild(a,r);var r=e.createComment("");e.appendChild(a,r),e.appendChild(n,a);var a=e.createTextNode("\n");return e.appendChild(n,a),e.appendChild(t,n),t},render:function(e,t,n){var a=t.dom,r=t.hooks,i=r.element,d=r.inline,o=r.content;a.detectNamespace(n);var s;t.useFragmentCache&&a.canClone?(null===this.cachedFragment&&(s=this.build(a),this.hasRendered?this.cachedFragment=s:this.hasRendered=!0),this.cachedFragment&&(s=a.cloneNode(this.cachedFragment,!0))):s=this.build(a);var c=a.childAt(s,[0]),l=a.childAt(c,[1]),h=a.childAt(c,[3]),u=a.childAt(c,[9]),p=a.createMorphAt(h,1,1),m=a.createMorphAt(h,5,5),g=a.createMorphAt(a.childAt(c,[13]),2,2),f=a.createMorphAt(a.childAt(c,[15]),2,2);return i(t,l,e,"action",["toggleSound"],{}),i(t,l,e,"bind-attr",[],{"class":"soundClass"}),d(t,p,e,"input",[],{type:"checkbox","class":"checkBox"}),d(t,m,e,"input",[],{type:"checkbox","class":"speedUp"}),i(t,u,e,"action",["newGame"],{}),o(t,g,e,"score"),o(t,f,e,"highScore"),s}}}())}),define("snakey/templates/components/game-grid",["exports"],function(e){"use strict";e["default"]=Ember.HTMLBars.template(function(){var e=function(){var e=function(){return{isHTMLBars:!0,revision:"Ember@1.11.1",blockParams:0,cachedFragment:null,hasRendered:!1,build:function(e){var t=e.createDocumentFragment(),n=e.createTextNode("            ");e.appendChild(t,n);var n=e.createElement("td"),a=e.createTextNode(" ");e.appendChild(n,a),e.appendChild(t,n);var n=e.createTextNode("\n");return e.appendChild(t,n),t},render:function(e,t,n){var a=t.dom,r=t.hooks,i=r.element;a.detectNamespace(n);var d;t.useFragmentCache&&a.canClone?(null===this.cachedFragment&&(d=this.build(a),this.hasRendered?this.cachedFragment=d:this.hasRendered=!0),this.cachedFragment&&(d=a.cloneNode(this.cachedFragment,!0))):d=this.build(a);var o=a.childAt(d,[1]);return i(t,o,e,"bind-attr",[],{"class":"cell.cellClass"}),d}}}();return{isHTMLBars:!0,revision:"Ember@1.11.1",blockParams:0,cachedFragment:null,hasRendered:!1,build:function(e){var t=e.createDocumentFragment(),n=e.createTextNode("      ");e.appendChild(t,n);var n=e.createElement("tr"),a=e.createTextNode("\n");e.appendChild(n,a);var a=e.createComment("");e.appendChild(n,a);var a=e.createTextNode("      ");e.appendChild(n,a),e.appendChild(t,n);var n=e.createTextNode("\n");return e.appendChild(t,n),t},render:function(t,n,a){var r=n.dom,i=n.hooks,d=i.get,o=i.block;r.detectNamespace(a);var s;n.useFragmentCache&&r.canClone?(null===this.cachedFragment&&(s=this.build(r),this.hasRendered?this.cachedFragment=s:this.hasRendered=!0),this.cachedFragment&&(s=r.cloneNode(this.cachedFragment,!0))):s=this.build(r);var c=r.createMorphAt(r.childAt(s,[1]),1,1);return o(n,c,t,"each",[d(n,t,"row")],{keyword:"cell"},e,null),s}}}();return{isHTMLBars:!0,revision:"Ember@1.11.1",blockParams:0,cachedFragment:null,hasRendered:!1,build:function(e){var t=e.createDocumentFragment(),n=e.createElement("table");e.setAttribute(n,"id","grid-table");var a=e.createTextNode("\n    ");e.appendChild(n,a);var a=e.createElement("tbody"),r=e.createTextNode("\n");e.appendChild(a,r);var r=e.createComment("");e.appendChild(a,r);var r=e.createTextNode("    ");e.appendChild(a,r),e.appendChild(n,a);var a=e.createTextNode("\n");return e.appendChild(n,a),e.appendChild(t,n),t},render:function(t,n,a){var r=n.dom,i=n.hooks,d=i.get,o=i.block;r.detectNamespace(a);var s;n.useFragmentCache&&r.canClone?(null===this.cachedFragment&&(s=this.build(r),this.hasRendered?this.cachedFragment=s:this.hasRendered=!0),this.cachedFragment&&(s=r.cloneNode(this.cachedFragment,!0))):s=this.build(r);var c=r.createMorphAt(r.childAt(s,[0,1]),1,1);return o(n,c,t,"each",[d(n,t,"grid")],{keyword:"row"},e,null),s}}}())}),define("snakey/templates/components/snakey-app",["exports"],function(e){"use strict";e["default"]=Ember.HTMLBars.template(function(){return{isHTMLBars:!0,revision:"Ember@1.11.1",blockParams:0,cachedFragment:null,hasRendered:!1,build:function(e){var t=e.createDocumentFragment(),n=e.createElement("div");e.setAttribute(n,"id","game-container");var a=e.createTextNode("\n  ");e.appendChild(n,a);var a=e.createComment("");e.appendChild(n,a);var a=e.createTextNode("\n\n  ");e.appendChild(n,a);var a=e.createComment("");e.appendChild(n,a);var a=e.createTextNode("\n");return e.appendChild(n,a),e.appendChild(t,n),t},render:function(e,t,n){var a=t.dom,r=t.hooks,i=r.get,d=r.inline;a.detectNamespace(n);var o;t.useFragmentCache&&a.canClone?(null===this.cachedFragment&&(o=this.build(a),this.hasRendered?this.cachedFragment=o:this.hasRendered=!0),this.cachedFragment&&(o=a.cloneNode(this.cachedFragment,!0))):o=this.build(a);var s=a.childAt(o,[0]),c=a.createMorphAt(s,1,1),l=a.createMorphAt(s,3,3);return d(t,c,e,"game-control",[],{newGameClick:"newGame",score:i(t,e,"score"),highScore:i(t,e,"highScore")}),d(t,l,e,"game-grid",[],{eatFrog:"score",gameState:i(t,e,"gameState")}),o}}}())}),define("snakey/templates/index",["exports"],function(e){"use strict";e["default"]=Ember.HTMLBars.template(function(){return{isHTMLBars:!0,revision:"Ember@1.11.1",blockParams:0,cachedFragment:null,hasRendered:!1,build:function(e){var t=e.createDocumentFragment(),n=e.createComment("");return e.appendChild(t,n),t},render:function(e,t,n){var a=t.dom,r=t.hooks,i=r.content;a.detectNamespace(n);var d;t.useFragmentCache&&a.canClone?(null===this.cachedFragment&&(d=this.build(a),this.hasRendered?this.cachedFragment=d:this.hasRendered=!0),this.cachedFragment&&(d=a.cloneNode(this.cachedFragment,!0))):d=this.build(a);var o=a.createMorphAt(d,0,0,n);return a.insertBoundary(d,null),a.insertBoundary(d,0),i(t,o,e,"snakey-app"),d}}}())}),define("snakey/config/environment",["ember"],function(e){var t="snakey";try{var n=t+"/config/environment",a=e["default"].$('meta[name="'+n+'"]').attr("content"),r=JSON.parse(unescape(a));return{"default":r}}catch(i){throw new Error('Could not read config from meta tag with name "'+n+'".')}}),runningTests?require("snakey/tests/test-helper"):require("snakey/app")["default"].create({name:"snakey",version:"0.0.0.041a0d50"});