define("snakey/app",["exports","ember","ember/resolver","ember/load-initializers","snakey/config/environment"],function(e,t,n,a,r){"use strict";var i;t["default"].MODEL_FACTORY_INJECTIONS=!0,i=t["default"].Application.extend({modulePrefix:r["default"].modulePrefix,podModulePrefix:r["default"].podModulePrefix,Resolver:n["default"]}),a["default"](i,r["default"].modulePrefix),e["default"]=i}),define("snakey/components/game-control",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Component.extend({actions:{newGame:function(){this.sendAction("newGameClick")},toggleSound:function(){var e=!this.get("soundOff");this.set("soundOff",e),t["default"].$("#game-song").trigger(e?"pause":"play"),"undefined"!=typeof Storage&&localStorage.setItem("snakey.soundOff",e)}},didInsertElement:function(){if("undefined"!=typeof Storage){var e=JSON.parse(localStorage.getItem("snakey.soundOff"))||!0;t["default"].$("#game-song").trigger(e?"pause":"play"),this.set("soundOff",e)}},score:null,highScore:null,soundOff:!0,speedUp:!1,infScrolling:!1,soundClass:function(){return this.get("soundOff")?"sound-off":"sound-on"}.property("soundOff")})}),define("snakey/components/game-grid",["exports","ember","snakey/components/game-grid/cell","snakey/components/game-grid/snake"],function(e,t,n,a){"use strict";e["default"]=t["default"].Component.extend({actions:{eatFrog:function(){this.sendAction("eatFrog"),this.decrementProperty("currentFrogs",1),this.get("putFrogsInGrid").bind(this)()}},gameState:null,onGameStateChange:function(){if("newGame"===this.get("gameState")){var e=0,n=0;this.resetBoard(),this.putFrogsInGrid(),this.get("snake").start(e,n),this.set("gameState","gameOn")}else"gameFinished"===this.get("gameState")&&(t["default"].$('td[class^="snake-head"]').append('<div class="explosion"><img src="assets/images/explosion.gif?_='+Math.random()+'" /></div>'),t["default"].run.later(function(){t["default"].$(".explosion").remove()},3e3))}.observes("gameState"),dimensions:[20,20],snake:null,maxFrogs:3,currentFrogs:0,putFrogsInGrid:function(){var e,t=this.get("freeCells"),n=Object.keys(t),a=[],r=this.get("grid"),i=this.get("currentFrogs"),o=this.get("maxFrogs")-i,s=this;0===t.length&&this.set("gameState","gameFinished");for(var d=0;o>d;d++){do e=Math.floor(Math.random()*n.length);while(a.contains(e));a.push(e)}a.forEach(function(e){var a=n[e];r[t[a][0]][t[a][1]].set("entity","frog"),s.incrementProperty("currentFrogs",1)})},grid:null,freeCells:null,resetBoard:function(){var e=t["default"].A(),a=this.get("dimensions");this.set("freeCells",t["default"].Object.create());for(var r=0;r<a[0];r++){for(var i=[],o=0;o<a[1];o++)i.push(n["default"].create({location:[r,o],parentController:this,entity:"empty"}));e.push(i)}this.setProperties({grid:e,currentFrogs:0})},didInsertElement:function(){this.resetBoard(),this.set("snake",a["default"].create({parentController:this}))}})}),define("snakey/components/game-grid/cell",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Object.extend({parentController:null,location:null,entity:null,onEntityChange:function(){var e=this.get("entity"),t=this.get("parentController.freeCells"),n=this.get("location"),a=n[0]+","+n[1];"empty"===e?t[a]=[n[0],n[1]]:delete t[a]}.observes("entity"),init:function(){this.onEntityChange()},cellClass:function(){return this.get("entity")+"-cell"}.property("entity")})}),define("snakey/components/game-grid/snake",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Object.extend({parentController:null,direction:null,lastMoveDirection:null,headPosition:null,body:null,defaultHeartBeat:140,heartBeat:140,minHeartBeat:70,heartBeatDecrementBy:5,timer:null,start:function(e,t){var n=this.get("defaultHeartBeat"),a=this.get("timer"),r=this;this.get("parentController.speedUp")&&(n*=1.5),this.set("heartBeat",n),this.setProperties({headPosition:[e,t],body:[],direction:[0,1,"-right"],lastMoveDirection:[0,0]}),this.get("parentController.grid")[e][t].set("entity","snake-head"+this.get("direction")[2]),null!==a&&clearInterval(a),this.set("timer",setInterval(function(){r.get("doMove").bind(r)()},n))},doMove:function(){var e=this.get("parentController"),t=this,n=this.get("direction");if("gameOn"===e.get("gameState")){var a=this.get("headPosition"),r=this.get("body"),i=e.get("dimensions")[0],o=e.get("dimensions")[1],s=a[0]+n[0],d=a[1]+n[1],c=!0;e.get("infScrolling")?(s%=i,d%=o,-1===s&&(s=i-1),-1===d&&(d=o-1)):c=s>=0&&d>=0&&i>s&&o>d;var l=r.every(function(e){return!(e[0]===s&&e[1]===d)});if(c&&l){var h=e.get("grid"),p=h[a[0]][a[1]],u=h[s][d];if("frog"===u.get("entity"))e.send("eatFrog"),r.push([a[0],a[1]]),h[a[0]][a[1]].set("entity","snake-body"+n[2]),e.get("speedUp")&&this.get("heartBeat")>this.get("minHeartBeat")&&(this.decrementProperty("heartBeat",this.get("heartBeatDecrementBy")),clearInterval(this.get("timer")),this.set("timer",setInterval(function(){t.get("doMove").bind(t)()},this.get("heartBeat"))));else{var g=r.shift();void 0!==g?(h[g[0]][g[1]].set("entity","empty"),h[a[0]][a[1]].set("entity","snake-body"+n[2]),r.push([a[0],a[1]])):p.set("entity","empty")}if(r.length>0){var m=h[r[0][0]][r[0][1]].entity.replace("snake-body","snake-tail");h[r[0][0]][r[0][1]].set("entity",m)}u.set("entity","snake-head"+n[2]),this.set("headPosition",[s,d]),this.set("lastMoveDirection",[n[0],n[1]])}else e.set("gameState","gameFinished")}else clearInterval(this.get("timer"))},init:function(){var e=this,n=this.get("isSafeNewDirection").bind(this);t["default"].$(document).keydown(function(t){var a=t.which;38!==a&&87!==a||!n([-1,0])?40!==a&&83!==a||!n([1,0])?37!==a&&65!==a||!n([0,-1])?39!==a&&68!==a||!n([0,1])||e.set("direction",[0,1,"-right"]):e.set("direction",[0,-1,"-left"]):e.set("direction",[1,0,"-down"]):e.set("direction",[-1,0,"-up"])})},isSafeNewDirection:function(e){if(this.get("body").length>0){var t=this.get("lastMoveDirection");if(t[0]+e[0]===0&&t[1]+e[1]===0)return!1}return!0}})}),define("snakey/components/snakey-app",["exports","ember"],function(e,t){"use strict";e["default"]=t["default"].Component.extend({actions:{newGame:function(){this.set("score",0),this.set("gameState","newGame")},score:function(){this.incrementProperty("score",this.get("incrementScoreBy"))}},onScoreChange:function(){"undefined"!=typeof Storage&&this.get("score")>this.get("highScore")&&(localStorage.setItem(this.get("highScoreLocalStorageKey"),this.get("score")),this.set("highScore",this.get("score")))}.observes("score"),didInsertElement:function(){if("undefined"!=typeof Storage){var e=localStorage.getItem(this.get("highScoreLocalStorageKey")),t=localStorage.getItem("snakey.infScrolling"),n=localStorage.getItem("snakey.speedUp");e&&this.set("highScore",e),t&&this.set("infScrolling",JSON.parse(t)),n&&this.set("speedUp",JSON.parse(n))}},onOptionsChange:function(e,t){"undefined"!=typeof Storage&&(localStorage.setItem("snakey."+t,this.get(t)),this.set("score",0),localStorage.getItem(this.get("highScoreLocalStorageKey"))?this.set("highScore",localStorage.getItem(this.get("highScoreLocalStorageKey"))):this.set("highScore",0))}.observes("speedUp","infScrolling"),onInfScrollingChange:function(){"undefined"!=typeof Storage&&localStorage.setItem("snakey.infScrolling",this.get("infScrolling"))}.observes("infScrolling"),incrementScoreBy:100,highScore:0,score:0,speedUp:!1,infScrolling:!1,highScoreLocalStorageKey:function(){return"snakey."+[this.get("speedUp"),this.get("infScrolling")].join(",")+".highScore"}.property("speedUp","infScrolling"),gameState:"noGame"})}),define("snakey/initializers/app-version",["exports","snakey/config/environment","ember"],function(e,t,n){"use strict";var a=n["default"].String.classify,r=!1;e["default"]={name:"App Version",initialize:function(e,i){if(!r){var o=a(i.toString());n["default"].libraries.register(o,t["default"].APP.version),r=!0}}}}),define("snakey/initializers/export-application-global",["exports","ember","snakey/config/environment"],function(e,t,n){"use strict";function a(e,a){var r=t["default"].String.classify(n["default"].modulePrefix);n["default"].exportApplicationGlobal&&!window[r]&&(window[r]=a)}e.initialize=a,e["default"]={name:"export-application-global",initialize:a}}),define("snakey/router",["exports","ember","snakey/config/environment"],function(e,t,n){"use strict";var a=t["default"].Router.extend({location:n["default"].locationType});e["default"]=a.map(function(){})}),define("snakey/templates/application",["exports"],function(e){"use strict";e["default"]=Ember.HTMLBars.template(function(){return{isHTMLBars:!0,revision:"Ember@1.11.1",blockParams:0,cachedFragment:null,hasRendered:!1,build:function(e){var t=e.createDocumentFragment(),n=e.createElement("div");e.setAttribute(n,"id","centered-form");var a=e.createTextNode("\n");e.appendChild(n,a);var a=e.createComment("");e.appendChild(n,a);var a=e.createTextNode("\n");return e.appendChild(n,a),e.appendChild(t,n),t},render:function(e,t,n){var a=t.dom,r=t.hooks,i=r.content;a.detectNamespace(n);var o;t.useFragmentCache&&a.canClone?(null===this.cachedFragment&&(o=this.build(a),this.hasRendered?this.cachedFragment=o:this.hasRendered=!0),this.cachedFragment&&(o=a.cloneNode(this.cachedFragment,!0))):o=this.build(a);var s=a.createMorphAt(a.childAt(o,[0]),1,1);return i(t,s,e,"outlet"),o}}}())}),define("snakey/templates/components/game-control",["exports"],function(e){"use strict";e["default"]=Ember.HTMLBars.template(function(){return{isHTMLBars:!0,revision:"Ember@1.11.1",blockParams:0,cachedFragment:null,hasRendered:!1,build:function(e){var t=e.createDocumentFragment(),n=e.createTextNode("\n");e.appendChild(t,n);var n=e.createElement("div");e.setAttribute(n,"id","game-control");var a=e.createTextNode("\n    ");e.appendChild(n,a);var a=e.createElement("div");e.setAttribute(a,"id","sound-control"),e.appendChild(n,a);var a=e.createTextNode("\n    ");e.appendChild(n,a);var a=e.createElement("div");e.setAttribute(a,"id","game-options");var r=e.createTextNode("\n      ");e.appendChild(a,r);var r=e.createComment("");e.appendChild(a,r);var r=e.createTextNode(" ∞ scrolling\n        ");e.appendChild(a,r);var r=e.createElement("br");e.appendChild(a,r);var r=e.createTextNode("\n      ");e.appendChild(a,r);var r=e.createComment("");e.appendChild(a,r);var r=e.createTextNode(" speed up\n    ");e.appendChild(a,r),e.appendChild(n,a);var a=e.createTextNode("\n    ");e.appendChild(n,a);var a=e.createElement("div");e.setAttribute(a,"id","game-title");var r=e.createTextNode("Snakey");e.appendChild(a,r),e.appendChild(n,a);var a=e.createTextNode("\n    ");e.appendChild(n,a);var a=e.createElement("div");e.setAttribute(a,"id","game-description");var r=e.createTextNode("Eat the frogs. Save the world.");e.appendChild(a,r),e.appendChild(n,a);var a=e.createTextNode("\n\n    ");e.appendChild(n,a);var a=e.createElement("div");e.setAttribute(a,"id","new-game-btn");var r=e.createTextNode("New Game");e.appendChild(a,r),e.appendChild(n,a);var a=e.createTextNode("\n\n    ");e.appendChild(n,a);var a=e.createElement("audio");e.setAttribute(a,"id","game-song"),e.setAttribute(a,"loop","");var r=e.createTextNode("\n        ");e.appendChild(a,r);var r=e.createElement("source");e.setAttribute(r,"src","game-song.mp3"),e.setAttribute(r,"type","audio/mpeg"),e.appendChild(a,r);var r=e.createTextNode("\n    ");e.appendChild(a,r),e.appendChild(n,a);var a=e.createTextNode("\n\n    ");e.appendChild(n,a);var a=e.createElement("div");e.setAttribute(a,"id","game-score");var r=e.createElement("span");e.setAttribute(r,"class","bold-text");var i=e.createTextNode("Score:");e.appendChild(r,i),e.appendChild(a,r);var r=e.createTextNode(" ");e.appendChild(a,r);var r=e.createComment("");e.appendChild(a,r),e.appendChild(n,a);var a=e.createTextNode("\n    ");e.appendChild(n,a);var a=e.createElement("div");e.setAttribute(a,"id","game-highscore");var r=e.createElement("span");e.setAttribute(r,"class","bold-text");var i=e.createTextNode("Highscore:");e.appendChild(r,i),e.appendChild(a,r);var r=e.createTextNode(" ");e.appendChild(a,r);var r=e.createComment("");e.appendChild(a,r),e.appendChild(n,a);var a=e.createTextNode("\n");return e.appendChild(n,a),e.appendChild(t,n),t},render:function(e,t,n){var a=t.dom,r=t.hooks,i=r.element,o=r.get,s=r.inline,d=r.content;a.detectNamespace(n);var c;t.useFragmentCache&&a.canClone?(null===this.cachedFragment&&(c=this.build(a),this.hasRendered?this.cachedFragment=c:this.hasRendered=!0),this.cachedFragment&&(c=a.cloneNode(this.cachedFragment,!0))):c=this.build(a);var l=a.childAt(c,[1]),h=a.childAt(l,[1]),p=a.childAt(l,[3]),u=a.childAt(l,[9]),g=a.createMorphAt(p,1,1),m=a.createMorphAt(p,5,5),f=a.createMorphAt(a.childAt(l,[13]),2,2),v=a.createMorphAt(a.childAt(l,[15]),2,2);return i(t,h,e,"action",["toggleSound"],{}),i(t,h,e,"bind-attr",[],{"class":"soundClass"}),s(t,g,e,"input",[],{type:"checkbox",checked:o(t,e,"infScrolling")}),s(t,m,e,"input",[],{type:"checkbox",checked:o(t,e,"speedUp")}),i(t,u,e,"action",["newGame"],{}),d(t,f,e,"score"),d(t,v,e,"highScore"),c}}}())}),define("snakey/templates/components/game-grid",["exports"],function(e){"use strict";e["default"]=Ember.HTMLBars.template(function(){var e=function(){var e=function(){return{isHTMLBars:!0,revision:"Ember@1.11.1",blockParams:0,cachedFragment:null,hasRendered:!1,build:function(e){var t=e.createDocumentFragment(),n=e.createTextNode("            ");e.appendChild(t,n);var n=e.createElement("td"),a=e.createTextNode(" ");e.appendChild(n,a),e.appendChild(t,n);var n=e.createTextNode("\n");return e.appendChild(t,n),t},render:function(e,t,n){var a=t.dom,r=t.hooks,i=r.element;a.detectNamespace(n);var o;t.useFragmentCache&&a.canClone?(null===this.cachedFragment&&(o=this.build(a),this.hasRendered?this.cachedFragment=o:this.hasRendered=!0),this.cachedFragment&&(o=a.cloneNode(this.cachedFragment,!0))):o=this.build(a);var s=a.childAt(o,[1]);return i(t,s,e,"bind-attr",[],{"class":"cell.cellClass"}),o}}}();return{isHTMLBars:!0,revision:"Ember@1.11.1",blockParams:0,cachedFragment:null,hasRendered:!1,build:function(e){var t=e.createDocumentFragment(),n=e.createTextNode("      ");e.appendChild(t,n);var n=e.createElement("tr"),a=e.createTextNode("\n");e.appendChild(n,a);var a=e.createComment("");e.appendChild(n,a);var a=e.createTextNode("      ");e.appendChild(n,a),e.appendChild(t,n);var n=e.createTextNode("\n");return e.appendChild(t,n),t},render:function(t,n,a){var r=n.dom,i=n.hooks,o=i.get,s=i.block;r.detectNamespace(a);var d;n.useFragmentCache&&r.canClone?(null===this.cachedFragment&&(d=this.build(r),this.hasRendered?this.cachedFragment=d:this.hasRendered=!0),this.cachedFragment&&(d=r.cloneNode(this.cachedFragment,!0))):d=this.build(r);var c=r.createMorphAt(r.childAt(d,[1]),1,1);return s(n,c,t,"each",[o(n,t,"row")],{keyword:"cell"},e,null),d}}}();return{isHTMLBars:!0,revision:"Ember@1.11.1",blockParams:0,cachedFragment:null,hasRendered:!1,build:function(e){var t=e.createDocumentFragment(),n=e.createElement("table");e.setAttribute(n,"id","grid-table");var a=e.createTextNode("\n    ");e.appendChild(n,a);var a=e.createElement("tbody"),r=e.createTextNode("\n");e.appendChild(a,r);var r=e.createComment("");e.appendChild(a,r);var r=e.createTextNode("    ");e.appendChild(a,r),e.appendChild(n,a);var a=e.createTextNode("\n");return e.appendChild(n,a),e.appendChild(t,n),t},render:function(t,n,a){var r=n.dom,i=n.hooks,o=i.get,s=i.block;r.detectNamespace(a);var d;n.useFragmentCache&&r.canClone?(null===this.cachedFragment&&(d=this.build(r),this.hasRendered?this.cachedFragment=d:this.hasRendered=!0),this.cachedFragment&&(d=r.cloneNode(this.cachedFragment,!0))):d=this.build(r);var c=r.createMorphAt(r.childAt(d,[0,1]),1,1);return s(n,c,t,"each",[o(n,t,"grid")],{keyword:"row"},e,null),d}}}())}),define("snakey/templates/components/snakey-app",["exports"],function(e){"use strict";e["default"]=Ember.HTMLBars.template(function(){return{isHTMLBars:!0,revision:"Ember@1.11.1",blockParams:0,cachedFragment:null,hasRendered:!1,build:function(e){var t=e.createDocumentFragment(),n=e.createElement("div");e.setAttribute(n,"id","game-container");var a=e.createTextNode("\n  ");e.appendChild(n,a);var a=e.createComment("");e.appendChild(n,a);var a=e.createTextNode("\n\n  ");e.appendChild(n,a);var a=e.createComment("");e.appendChild(n,a);var a=e.createTextNode("\n");return e.appendChild(n,a),e.appendChild(t,n),t},render:function(e,t,n){var a=t.dom,r=t.hooks,i=r.get,o=r.inline;a.detectNamespace(n);var s;t.useFragmentCache&&a.canClone?(null===this.cachedFragment&&(s=this.build(a),this.hasRendered?this.cachedFragment=s:this.hasRendered=!0),this.cachedFragment&&(s=a.cloneNode(this.cachedFragment,!0))):s=this.build(a);var d=a.childAt(s,[0]),c=a.createMorphAt(d,1,1),l=a.createMorphAt(d,3,3);return o(t,c,e,"game-control",[],{newGameClick:"newGame",score:i(t,e,"score"),highScore:i(t,e,"highScore"),speedUp:i(t,e,"speedUp"),infScrolling:i(t,e,"infScrolling")}),o(t,l,e,"game-grid",[],{eatFrog:"score",gameState:i(t,e,"gameState"),speedUp:i(t,e,"speedUp"),infScrolling:i(t,e,"infScrolling")}),s}}}())}),define("snakey/templates/index",["exports"],function(e){"use strict";e["default"]=Ember.HTMLBars.template(function(){return{isHTMLBars:!0,revision:"Ember@1.11.1",blockParams:0,cachedFragment:null,hasRendered:!1,build:function(e){var t=e.createDocumentFragment(),n=e.createComment("");return e.appendChild(t,n),t},render:function(e,t,n){var a=t.dom,r=t.hooks,i=r.content;a.detectNamespace(n);var o;t.useFragmentCache&&a.canClone?(null===this.cachedFragment&&(o=this.build(a),this.hasRendered?this.cachedFragment=o:this.hasRendered=!0),this.cachedFragment&&(o=a.cloneNode(this.cachedFragment,!0))):o=this.build(a);var s=a.createMorphAt(o,0,0,n);return a.insertBoundary(o,null),a.insertBoundary(o,0),i(t,s,e,"snakey-app"),o}}}())}),define("snakey/config/environment",["ember"],function(e){var t="snakey";try{var n=t+"/config/environment",a=e["default"].$('meta[name="'+n+'"]').attr("content"),r=JSON.parse(unescape(a));return{"default":r}}catch(i){throw new Error('Could not read config from meta tag with name "'+n+'".')}}),runningTests?require("snakey/tests/test-helper"):require("snakey/app")["default"].create({name:"snakey",version:"0.0.0.c2708f36"});